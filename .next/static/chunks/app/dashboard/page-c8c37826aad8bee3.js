(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{2048:(e,s,r)=>{Promise.resolve().then(r.bind(r,5267))},5267:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>k});var a=r(5155),t=r(2115),n=r(6046),i=r(4049),l=r(9871),c=r(8357),d=r(1734),o=r(8368);let h=t.forwardRef((e,s)=>{let{className:r,value:t,...n}=e;return(0,a.jsx)(d.bL,{ref:s,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...n,children:(0,a.jsx)(d.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});h.displayName=d.bL.displayName;var m=r(7746),x=r(37),u=r(437),j=r(9450),f=r(1983),p=r(8220),g=r(2604),N=r(8173),v=r.n(N),y=r(2488),b=r(2645);function C(e){let{modules:s,currentModule:r}=e,[n,i]=(0,t.useState)(r),d=e=>{i(n===e?null:e)};return(0,a.jsxs)(c.Zp,{className:"mb-8",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"M\xf3dulos del Programa"})}),(0,a.jsx)(c.Wu,{children:s.map(e=>(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>d(e.order),children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"".concat(e.order,". ").concat(e.title)}),n===e.order?(0,a.jsx)(y.A,{className:"h-5 w-5"}):(0,a.jsx)(b.A,{className:"h-5 w-5"})]}),n===e.order&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("ul",{className:"list-disc list-inside ml-4",children:e.topics.map((e,s)=>(0,a.jsx)("li",{className:"text-sm text-gray-600 mb-1",children:e},s))}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/modules/".concat(e.order),children:"Ir al M\xf3dulo"})})]})]},e.order))})]})}var w=r(3474);function A(){let[e,s]=(0,t.useState)(null),[r,n]=(0,t.useState)(!0);(0,t.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=await fetch("/api/admin/dashboard",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let r=await e.json();s(r)}else console.error("Failed to fetch admin dashboard data")}catch(e){console.error("Error fetching admin dashboard data:",e)}finally{n(!1)}};return r?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Cargando..."}):e?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Panel de Administraci\xf3n"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2"})," Usuarios"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.totalUsers}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Usuarios registrados"}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/users",children:"Gestionar Usuarios"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2"})," Aplicaciones"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold",children:e.pendingApplications}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aplicaciones pendientes"}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/applications",children:"Revisar Aplicaciones"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(w.A,{className:"mr-2"})," Configuraci\xf3n"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Gestiona la configuraci\xf3n del sistema"}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/settings",children:"Configuraci\xf3n del Sistema"})})]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Acciones R\xe1pidas"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(l.$,{asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/create-module",children:"Crear Nuevo M\xf3dulo"})}),(0,a.jsx)(l.$,{asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/reports",children:"Ver Reportes"})}),(0,a.jsx)(l.$,{asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/send-notification",children:"Enviar Notificaci\xf3n"})}),(0,a.jsx)(l.$,{asChild:!0,children:(0,a.jsx)(v(),{href:"/admin/manage-content",children:"Gestionar Contenido"})})]})})]})]}):(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Error al cargar los datos del dashboard de administrador"})}function k(){let{user:e,loading:s,refreshToken:r,isTokenExpired:d}=(0,i.A)(),o=(0,n.useRouter)(),[N,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(!0),[k,Z]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{if(!s){if(e){if(d()&&!await r()){o.push("/login");return}R()}else o.push("/login")}})()},[e,s,o,r,d]);let R=async()=>{try{let e=await fetch("/api/dashboard",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let s=await e.json();y(s),Z(null)}else throw Error("Failed to fetch dashboard data")}catch(e){console.error("Error fetching dashboard data:",e),Z("Error al cargar los datos del dashboard. Por favor, intenta de nuevo m\xe1s tarde.")}finally{w(!1)}};return s||b?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:"Cargando..."}):k?(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:k}):N?(null==e?void 0:e.isAdmin)?(0,a.jsx)(A,{}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold mb-8",children:["Bienvenido de vuelta, ",N.user.name]}),(0,a.jsxs)(c.Zp,{className:"mb-8",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Tu Progreso"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("p",{className:"text-lg mb-4",children:["Continuar con M\xf3dulo ",N.user.currentModule]}),(0,a.jsx)(h,{value:N.user.progress,className:"w-full"}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:[N.user.progress,"% completado"]}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/modules/".concat(N.user.currentModule),children:"Continuar Aprendizaje"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"mr-2"})," Notificaciones"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Tienes 0 nuevos mensajes del chatbot."}),(0,a.jsx)(l.$,{variant:"outline",className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/notifications",children:"Ver Notificaciones"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"mr-2"})," Contacto"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"\xbfNecesitas ayuda? Cont\xe1ctanos."}),(0,a.jsx)(l.$,{variant:"outline",className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/contact",children:"Contactar"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2"})," Comunidad"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"\xdanete a nuestra comunidad de emprendedores."}),(0,a.jsx)(l.$,{variant:"outline",className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/community",children:"Unirse a la Comunidad"})})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"mr-2"})," Iniciar Gu\xeda"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Comienza tu viaje emprendedor con nuestra gu\xeda paso a paso."}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/guide",children:"Iniciar Gu\xeda"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"mr-2"})," An\xe1lisis Inicial"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Realiza un an\xe1lisis de tu idea de startup."}),(0,a.jsx)(l.$,{className:"mt-4",asChild:!0,children:(0,a.jsx)(v(),{href:"/analysis",children:"Comenzar An\xe1lisis"})})]})]})]}),(0,a.jsx)(C,{modules:N.modules,currentModule:N.user.currentModule}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"mr-2"})," Graduaci\xf3n"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Completa todos los m\xf3dulos y obt\xe9n tu diploma de LinkUp."}),(0,a.jsx)(l.$,{className:"mt-4",disabled:N.user.progress<100,asChild:!0,children:(0,a.jsx)(v(),{href:"/graduation",children:"Formulario de Graduaci\xf3n"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"mr-2"})," Post-Graduaci\xf3n"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{children:"Explora las opciones post-graduaci\xf3n y \xfanete a Vefy."}),(0,a.jsx)(l.$,{className:"mt-4",disabled:N.user.progress<100,asChild:!0,children:(0,a.jsx)(v(),{href:"/post-graduation",children:"Opciones Post-Graduaci\xf3n"})})]})]})]})]}):(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",children:"No se encontraron datos del dashboard"})}},9871:(e,s,r)=>{"use strict";r.d(s,{$:()=>d});var a=r(5155),t=r(2115),n=r(2317),i=r(1027),l=r(8368);let c=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary-500 text-white shadow-sm hover:bg-secondary-600",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=t.forwardRef((e,s)=>{let{className:r,variant:t,size:i,asChild:d=!1,...o}=e,h=d?n.DX:"button";return(0,a.jsx)(h,{className:(0,l.cn)(c({variant:t,size:i,className:r})),ref:s,...o})});d.displayName="Button"},8357:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>d,ZB:()=>l,Zp:()=>n,aR:()=>i});var a=r(5155),t=r(2115);let n=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:"rounded-lg border bg-card text-card-foreground shadow-sm ".concat(r),...t})});n.displayName="Card";let i=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:"flex flex-col space-y-1.5 p-6 ".concat(r),...t})});i.displayName="CardHeader";let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("h3",{ref:s,className:"text-2xl font-semibold leading-none tracking-tight ".concat(r),...t})});l.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("p",{ref:s,className:"text-sm text-muted-foreground ".concat(r),...t})});c.displayName="CardDescription";let d=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:"p-6 pt-0 ".concat(r),...t})});d.displayName="CardContent",t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,a.jsx)("div",{ref:s,className:"flex items-center p-6 pt-0 ".concat(r),...t})}).displayName="CardFooter"},4049:(e,s,r)=>{"use strict";r.d(s,{A:()=>c,AuthProvider:()=>l});var a=r(5155),t=r(2115),n=r(7684);let i=(0,t.createContext)(),l=e=>{let{children:s}=e,[r,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{(async()=>{let e=localStorage.getItem("token");if(e)try{let s=(0,n.s)(e),r=Date.now()/1e3;if(s.exp&&s.exp>r){let s="true"===localStorage.getItem("isAdmin");l({token:e,isAdmin:s})}else await h()}catch(e){console.error("Error decoding token:",e),await h()}d(!1)})()},[]);let o=async e=>{try{if("string"!=typeof e||""===e.trim())throw Error("Invalid token: Token must be a non-empty string");let s=(0,n.s)(e).isAdmin||!1;return localStorage.setItem("token",e),localStorage.setItem("isAdmin",s.toString()),l({token:e,isAdmin:s}),!0}catch(e){return console.error("Error logging in:",e),await h(),!1}},h=async()=>{localStorage.removeItem("token"),localStorage.removeItem("isAdmin"),l(null)},m=async()=>{try{let e=await fetch("/api/refresh-token",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(e.ok){let{token:s}=await e.json();return await o(s),!0}throw Error("Failed to refresh token")}catch(e){return console.error("Error refreshing token:",e),await h(),!1}};return(0,a.jsx)(i.Provider,{value:{user:r,loading:c,login:o,logout:h,refreshToken:m,isTokenExpired:()=>{let e=localStorage.getItem("token");if(!e)return!0;try{let s=(0,n.s)(e),r=Date.now()/1e3;return s.exp<r}catch(e){return console.error("Error checking token expiration:",e),!0}}},children:s})},c=()=>(0,t.useContext)(i)},8368:(e,s,r)=>{"use strict";r.d(s,{cn:()=>n});var a=r(3463),t=r(9795);function n(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return(0,t.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[726,463,647,441,517,358],()=>s(2048)),_N_E=e.O()}]);